<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Lakshmi Sarees</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .profile-hero { background: linear-gradient(135deg, #8b0000, #c41e3a); padding: 60px 20px; text-align: center; color: white; }
        .profile-hero h1 { font-size: 42px; margin: 0; }
        .profile-container { max-width: 1000px; margin: -40px auto 50px; padding: 0 20px; }
        .profile-card { background: white; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); overflow: hidden; animation: fadeIn 0.6s; }
        .profile-header { background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 40px; text-align: center; position: relative; }
        .profile-avatar { width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #8b0000, #c41e3a); display: flex; align-items: center; justify-content: center; font-size: 48px; color: white; margin: 0 auto 20px; border: 5px solid white; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        .profile-name { font-size: 28px; font-weight: 700; color: #333; margin: 0; }
        .profile-email { color: #666; margin: 8px 0 0 0; }
        .profile-tabs { display: flex; border-bottom: 2px solid #e0e0e0; padding: 0 40px; background: white; }
        .tab-btn { padding: 18px 30px; border: none; background: none; font-size: 16px; font-weight: 600; color: #666; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s; }
        .tab-btn.active { color: #8b0000; border-bottom-color: #8b0000; }
        .tab-btn:hover { color: #8b0000; }
        .profile-content { padding: 40px; }
        .tab-panel { display: none; animation: slideIn 0.4s; }
        .tab-panel.active { display: block; }
        .info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; }
        .info-item { padding: 20px; background: #f8f9fa; border-radius: 12px; border-left: 4px solid #8b0000; }
        .info-label { font-size: 13px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 8px 0; }
        .info-value { font-size: 16px; font-weight: 600; color: #333; margin: 0; }
        .edit-form { display: grid; gap: 20px; }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { font-weight: 600; color: #333; margin-bottom: 8px; font-size: 14px; }
        .form-group input { padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 15px; transition: all 0.3s; }
        .form-group input:focus { outline: none; border-color: #8b0000; box-shadow: 0 0 0 3px rgba(139,0,0,0.1); }
        .btn-save { background: linear-gradient(135deg, #8b0000, #c41e3a); color: white; padding: 15px 30px; border: none; border-radius: 10px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; }
        .btn-save:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(139,0,0,0.3); }
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 25px; border-radius: 15px; text-align: center; }
        .stat-number { font-size: 36px; font-weight: 900; color: #8b0000; margin: 0; }
        .stat-label { color: #666; margin: 8px 0 0 0; font-size: 14px; }
        @media (max-width: 768px) { .info-grid, .stats-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">Lakshmi Sarees</div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="user-dashboard.html">My Orders</a></li>
                <li><a href="profile.html" class="active">Profile</a></li>
                <li><a href="#" onclick="logout()">Logout</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="profile-hero">
        <h1>üë§ My Profile</h1>
    </div>

    <div class="profile-container">
        <div class="profile-card">
            <div class="profile-header">
                <div class="profile-avatar" id="avatar">üë§</div>
                <h2 class="profile-name" id="profile-name">User Name</h2>
                <p class="profile-email" id="profile-email">user@email.com</p>
            </div>
            
            <div class="profile-tabs">
                <button class="tab-btn active" onclick="showTab('overview')">Overview</button>
                <button class="tab-btn" onclick="showTab('edit')">Edit Profile</button>
                <button class="tab-btn" onclick="showTab('security')">Security</button>
            </div>
            
            <div class="profile-content">
                <div id="tab-overview" class="tab-panel active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3 class="stat-number" id="total-orders">0</h3>
                            <p class="stat-label">Total Orders</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="stat-number" id="pending-orders">0</h3>
                            <p class="stat-label">Pending Orders</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="stat-number" id="total-spent">‚Çπ0</h3>
                            <p class="stat-label">Total Spent</p>
                        </div>
                    </div>
                    
                    <h3 style="color:#8b0000;margin:0 0 20px 0;">Personal Information</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <p class="info-label">Full Name</p>
                            <p class="info-value" id="info-name">-</p>
                        </div>
                        <div class="info-item">
                            <p class="info-label">Email</p>
                            <p class="info-value" id="info-email">-</p>
                        </div>
                        <div class="info-item">
                            <p class="info-label">Phone</p>
                            <p class="info-value" id="info-phone">-</p>
                        </div>
                        <div class="info-item">
                            <p class="info-label">Member Since</p>
                            <p class="info-value" id="info-joined">-</p>
                        </div>
                    </div>
                </div>
                
                <div id="tab-edit" class="tab-panel">
                    <h3 style="color:#8b0000;margin:0 0 25px 0;">Edit Profile Information</h3>
                    <form class="edit-form" id="edit-form">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="edit-name" placeholder="Enter your name">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="edit-email" placeholder="your@email.com">
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" id="edit-phone" placeholder="+91 1234567890">
                        </div>
                        <button type="submit" class="btn-save">üíæ Save Changes</button>
                    </form>
                </div>
                
                <div id="tab-security" class="tab-panel">
                    <h3 style="color:#8b0000;margin:0 0 25px 0;">Change Password</h3>
                    <form class="edit-form" id="password-form">
                        <div class="form-group">
                            <label>Current Password</label>
                            <input type="password" id="current-password" placeholder="Enter current password">
                        </div>
                        <div class="form-group">
                            <label>New Password</label>
                            <input type="password" id="new-password" placeholder="Enter new password">
                        </div>
                        <div class="form-group">
                            <label>Confirm New Password</label>
                            <input type="password" id="confirm-password" placeholder="Confirm new password">
                        </div>
                        <button type="submit" class="btn-save">üîí Update Password</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function showTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('tab-' + tab).classList.add('active');
        }
        
        function loadProfile() {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if (!user) {
                window.location.href = 'login.html';
                return;
            }
            
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const userOrders = orders.filter(o => o.userId === (user.email || user.username));
            const totalSpent = userOrders.reduce((sum, o) => sum + parseFloat(o.total || 0), 0);
            const pendingOrders = userOrders.filter(o => o.status === 'Pending').length;
            
            document.getElementById('profile-name').textContent = user.name || user.username;
            document.getElementById('profile-email').textContent = user.email || user.username;
            document.getElementById('avatar').textContent = (user.name || user.username).charAt(0).toUpperCase();
            
            document.getElementById('total-orders').textContent = userOrders.length;
            document.getElementById('pending-orders').textContent = pendingOrders;
            document.getElementById('total-spent').textContent = '‚Çπ' + Math.round(totalSpent);
            
            document.getElementById('info-name').textContent = user.name || user.username;
            document.getElementById('info-email').textContent = user.email || user.username;
            document.getElementById('info-phone').textContent = user.phone || 'Not provided';
            document.getElementById('info-joined').textContent = user.joinedDate ? new Date(user.joinedDate).toLocaleDateString() : 'N/A';
            
            document.getElementById('edit-name').value = user.name || '';
            document.getElementById('edit-email').value = user.email || '';
            document.getElementById('edit-phone').value = user.phone || '';
        }
        
        document.getElementById('edit-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const user = JSON.parse(localStorage.getItem('currentUser'));
            user.name = document.getElementById('edit-name').value;
            user.email = document.getElementById('edit-email').value;
            user.phone = document.getElementById('edit-phone').value;
            localStorage.setItem('currentUser', JSON.stringify(user));
            alert('‚úÖ Profile updated successfully!');
            loadProfile();
            showTab('overview');
        });
        
        document.getElementById('password-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const user = JSON.parse(localStorage.getItem('currentUser'));
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (currentPassword !== user.password) {
                alert('‚ùå Current password is incorrect!');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert('‚ùå New passwords do not match!');
                return;
            }
            
            if (newPassword.length < 6) {
                alert('‚ùå Password must be at least 6 characters!');
                return;
            }
            
            user.password = newPassword;
            localStorage.setItem('currentUser', JSON.stringify(user));
            alert('‚úÖ Password updated successfully!');
            document.getElementById('password-form').reset();
        });
        
        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }
        
        window.onload = loadProfile;
    </script>
</body>
</html>
